<div class="flex min-h-screen bg-gray-100">
	<div class="w-full md:w-1/2 flex items-center justify-center">
		<div class="w-full max-w-sm px-4 py-8 md:px-8">
			<form nz-form [formGroup]="validateForm" class="bg-white shadow-2xl rounded-lg p-8" (ngSubmit)="submitForm()">
				<h2 class="flex items-center justify-center text-3xl font-extrabold text-gray-900 mb-8">
					<img class="w-10 h-10 mr-3 object-cover rounded-full" src="assets/icase-logo.jpeg" alt="logo icase store" />
					<span class="font-semibold">Icase's Store</span>
				</h2>

				<nz-form-item class="mb-6">
					<nz-form-control nzErrorTip="Por favor, ingrese su email!">
						<nz-input-group nzPrefixIcon="mail" class="rounded-md">
							<input
								type="email"
								nz-input
								formControlName="email"
								placeholder="Email"
								class="w-full py-3 px-4 border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>

				<nz-form-item class="mb-6">
					<nz-form-control nzErrorTip="Por favor, ingrese su contraseña!">
						<nz-input-group [nzPrefix]="prefixTemplate" [nzSuffix]="suffixTemplate" class="rounded-md">
							<input
								[type]="passwordVisible ? 'text' : 'password'"
								nz-input
								formControlName="password"
								placeholder="Contraseña"
								class="w-full py-3 px-4 border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
							/>
						</nz-input-group>
						<ng-template #prefixTemplate>
							<i nz-icon nzType="lock" nzTheme="outline"></i>
						</ng-template>
						<ng-template #suffixTemplate>
							<i
								nz-icon
								[nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
								nzTheme="outline"
								(click)="togglePasswordVisibility()"
								class="cursor-pointer"
							></i>
						</ng-template>
					</nz-form-control>
				</nz-form-item>

				<div class="flex items-center justify-between mb-6">
					<label nz-checkbox formControlName="remember" class="text-sm text-gray-600">
						<span>Recuérdame</span>
					</label>
				</div>
				<app-recapcha (tokenObtained)="onRecaptchaTokenObtained($event)"></app-recapcha>

				<button
					nz-button
					class="w-full px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
					nzType="primary"
				>
					Iniciar sesión
				</button>
			</form>
		</div>
	</div>

	<div class="hidden md:flex w-1/2 bg-indigo-600 items-center justify-center">
		<img src="assets/login_picture.svg" alt="Login Image" class="w-3/4 max-w-lg" />
	</div>
</div>

<div
	*ngIf="isLoading"
	class="fixed top-0 left-0 w-screen h-screen bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"
>
	<svg class="w-12 h-12 text-white animate-spin" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path
			d="M12 4V2M12 22V20M4 12H2M22 12H20M5.64645 5.64645L4.22803 4.22803M18.3536 18.3536L16.9393 16.9393M5.64645 18.3536L4.22803 19.772M18.3536 5.64645L16.9393 7.0607"
			stroke="currentColor"
			stroke-width="2"
			stroke-linecap="round"
			stroke-linejoin="round"
		/>
	</svg>
	<span class="text-white text-lg font-medium ml-4">Cargando...</span>
</div>
